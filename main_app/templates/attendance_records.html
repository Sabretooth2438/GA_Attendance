{% extends "base.html" %}

{% block title %}Attendance Records | GA Attendance{% endblock %}

{% block content %}
<h2>Your Attendance Records</h2>

<p><strong>Total Absences (Including Late):</strong> {{ total_absent_equivalent }}</p>
<p><strong>Absence Percentage:</strong> {{ absence_percentage }}%</p>
<p><strong>Late Percentage:</strong> {{ late_percentage }}%</p>

{% if expelled %}
    <p class="expelled-text">❌ You have been expelled due to poor attendance.</p>
{% elif warning %}
    <p class="warning-text">⚠️ Warning: Your absence percentage is concerning. Please improve your attendance!</p>
{% endif %}

<table>
    <thead>
        <tr>
            <th>Date</th>
            <th>Status</th>
            <th>Reason</th>
        </tr>
    </thead>
    <tbody>
        {% for record in records %}
            <tr>
                <td>{{ record.date }}</td>
                <td>
                    {% if record.status == 'P' %}
                        ✅ Present
                    {% elif record.status == 'A' %}
                        ❌ Absent
                    {% elif record.status == 'L' %}
                        ⏰ Late
                    {% elif record.status == 'E' %}
                        ✉️ Excused
                    {% endif %}
                </td>
                <td>{{ record.reason|default:"N/A" }}</td>
            </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
